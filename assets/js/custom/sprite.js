/**
*	@author: LÃ©on de Jong
*/
(function(t){"use strict";function i(t){this.initialize(t)}return i.prototype={constructor:i,x:0,y:0,frame:0,row:0,column:0,running:!1,defaults:{container:"body",identifier:"sprite",reference:"sprite.png",options:{},rate:32,delay:0,frames:64,rows:8,columns:8,width:128,height:128,run:!0,loop:!1,reverse:!1,retina:!0},initialize:function(t){this.options=t||{},this.assign(),this.setup()},assign:function(t){t=this.object("defaults",t);for(var i in t)t.hasOwnProperty(i)&&"undefined"==typeof this[i]&&this["default"](i,typeof t[i],t[i])},"default":function(t,i,e,s){s=this.object("options",s),this[t]=typeof s[t]===i?s[t]:e},object:function(t,i){return"object"==typeof i?i:"object"==typeof this[t]?this[t]:{}},setup:function(){this.container&&this.identifier&&this.reference&&(this.retina&&(this.width/=2,this.height/=2),this.container=document.querySelector(this.container),this.element=document.createElement("div"),this.element.setAttribute("id",this.identifier),this.element.style.top=0,this.element.style.right=0,this.element.style.bottom=0,this.element.style.left=0,this.element.style.margin="auto",this.element.style.position="fixed",this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.element.style.overflow="hidden",this.element.style.backgroundImage="url("+this.reference+")",this.element.style.backgroundSize=this.width*this.columns+"px "+this.height*this.rows+"px",this.container.appendChild(this.element),this.run&&this.start())},start:function(){this.running||(this.running=!0,setTimeout(function(){this.reverse?this.previous():this.next()}.bind(this),this.delay))},stop:function(){this.running=!1},show:function(){this.element.style.display="block",this.start()},hide:function(){this.element.style.display="none",this.stop()},next:function(){this.running&&(++this.frame>=this.frames&&(this.frame=0,this.loop||this.stop()),this.shift())},previous:function(){this.running&&(--this.frame<=-1&&(this.frame=this.frames,this.loop||this.stop()),this.shift())},shift:function(){if(this.running){this.row=Math.floor(this.frame/this.columns),this.column=Math.floor(this.frame-this.row*this.columns),this.x=this.column*-this.width,this.y=this.row*-this.height;var t=this.x+"px "+this.y+"px";this.element.style.backgroundPosition=t,this.reverse?setTimeout(this.previous.bind(this),1e3/this.rate):setTimeout(this.next.bind(this),1e3/this.rate)}},dispose:function(){this.stop(),this.element.parentNode===this.container&&this.container.removeChild(this.element);for(var t in this)this.hasOwnProperty(t)&&delete this[t]}},t.Sprite=function(t){var e=new i(t);this.start=function(){return e.start.apply(e,arguments)},this.stop=function(){return e.stop.apply(e,arguments)},this.show=function(){return e.show.apply(e,arguments)},this.hide=function(){return e.hide.apply(e,arguments)},this.next=function(){return e.next.apply(e,arguments)},this.previous=function(){return e.previous.apply(e,arguments)},this.dispose=function(){return e.dispose.apply(e,arguments)}},t.Sprite}).call(this,window);